"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const nonWebpackRequire_1 = __importDefault(require("@layer0/core/utils/nonWebpackRequire"));
const path_1 = require("path");
/**
 * Gets the build output directory for Next.js
 */
function getDistDir() {
    const root = process.cwd();
    const nextConfigFile = path_1.join(root, 'next.config.js');
    let nextConfig;
    try {
        nextConfig = nonWebpackRequire_1.default(nextConfigFile);
    }
    catch (e) {
        // will get here if no next config file is present
    }
    if (typeof nextConfig === 'function') {
        nextConfig = nextConfig('phase-production-build', {});
    }
    return (nextConfig === null || nextConfig === void 0 ? void 0 : nextConfig.distDir) || '.next';
}
exports.default = getDistDir;
